{% extends "core/base.html" %}

{% block content %}
<h1 class="mb-4">My Dashboard</h1>

<!-- My Reports -->
<h3 class="h5">My Reports</h3>

{% if my_reports %}
<ul class="list-group mb-4">
    {% for report in my_reports %}
    <li class="list-group-item">
        <strong>{{ report.item.title }}</strong>
        <span class="badge bg-secondary ms-2">{{ report.get_status_display }}</span>
        <br>
        <small class="text-muted">
            {{ report.created_at }} â€“ {{ report.reason|truncatechars:120 }}
        </small>
    </li>
    {% endfor %}
</ul>
{% else %}
<p class="text-muted mb-4">You haven't reported any items yet.</p>
{% endif %}

<div class="row">
    <!-- Recent unclaimed -->
    <div class="col-md-6">
        <h3 class="h5">Recently Found</h3>
        <ul class="list-group mb-4">
            {% for item in recent_unclaimed %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <span>{{ item.title }}</span>
                <a href="{% url 'item_detail' item.pk %}" class="btn btn-sm btn-outline-primary">View</a>
            </li>
            {% empty %}
            <li class="list-group-item text-muted">No items.</li>
            {% endfor %}
        </ul>
    </div>

    <!-- Recent claimed -->
    <div class="col-md-6">
        <h3 class="h5">Recently Claimed</h3>
        <ul class="list-group mb-4">
            {% for item in recent_claimed %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <span>{{ item.title }}</span>
                <a href="{% url 'item_detail' item.pk %}" class="btn btn-sm btn-outline-primary">View</a>
            </li>
            {% empty %}
            <li class="list-group-item text-muted">No items.</li>
            {% endfor %}
        </ul>
    </div>
</div>

{% endblock %}
